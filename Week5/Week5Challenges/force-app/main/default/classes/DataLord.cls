/*---------------------------------------------------------------------------------------------------------------------
Author: Chase Johns
Last Modified: 3/7/2023
Description: Data handler class utilized in Coding Challenges
---------------------------------------------------------------------------------------------------------------------*/

public without sharing class  DataLord {
    
    public Integer numAccounts(){
        List<Account> allAccounts = [SELECT Id FROM Account];
        return allAccounts.size();
    }

    //Challenge 2: Number of Hot Rated Accounts to be Returned
    public Integer numHot(){
        //Declare and query for our list of Hot Rated Accounts
        List<Account> hotAccounts = [SELECT Rating FROM Account WHERE Rating='Hot'];
        //Return the size
        return hotAccounts.size();
    }

    //Challenge 3: Returning the number of Accounts that contain an Ampersand in their name
    public Integer numComplex(){
        //Querying for our relevant accounts using two % wildcards to operate like a 'contains'
        List<Account> complexAccounts = [SELECT Name FROM Account WHERE Name LIKE '%&%'];
        //Return the size
        return complexAccounts.size();
    }

    //Challenge 4: Returning the Big 5 in a single line filtering out nulls sorting from most to least
    public List<Account> bigFive(){
        return [SELECT AnnualRevenue FROM Account ORDER BY AnnualRevenue DESC NULLS LAST LIMIT 5];
    }

    //Challenge 5: Returning the most recent Opportunity with an amount over $100,000
    public List<Opportunity> lastBigOpportunity(){
        return [SELECT CloseDate, Amount FROM Opportunity WHERE Amount > 100000 ORDER BY CloseDate DESC LIMIT 1];
    }

    //Challenge 6: Returning all Contacts associated with Hot Rated Accounts (Querying the child for parent fields)
    public List<Contact> majorPlayers(){
        return [SELECT Name, Account.Name, Account.Rating FROM Contact WHERE Account.Rating = 'Hot'];
    }
}